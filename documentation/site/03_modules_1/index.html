<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>03 modules 1 - Zerp Documentation</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <a class="navbar-brand" href="..">Zerp Documentation</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#module-development">Module development</a></li>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#module-structure">Module Structure</a></li>
            <li><a href="#openerp-module-descriptor-file-9595openerp9595py_1">OpenERP Module Descriptor File : __openerp__.py</a></li>
            <li><a href="#module-creation">Module creation</a></li>
            <li><a href="#action-creation">Action creation</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="module-development">Module development</h1>
<h2 id="introduction">Introduction</h2>
<p>OpenERP uses a <a href="http://en.wikipedia.org/wiki/Multitier_architecture#Three-tier_architecture">three-tier architecture</a>. The application tier itself is written as a core and multiple additional modules that can be installed or not to create a particular configuration of OpenERP.</p>
<p>The core of OpenERP and its different modules are written in <a href="http://python.org/">Python</a>. The functionality of a module is exposed through XML-RPC (and/or NET-RPC depending on the server's configuration). Modules also typically make use of OpenERP ORM to persist their data in a relational database (PostgreSQL). Modules can insert data in the database during installation by providing XML (or CSV or YML) files.</p>
<p>Although modules are a simple way to structure a complex application, OpenERP modules also extend the system. Modules are also called addons (they could also have been called plugins).</p>
<p>In a typical configuration of OpenERP, the following modules can be found:</p>
<ul>
<li>base: the most basic module; it is always installed and can be thought as being part of the core of OpenERP. It defines <code>ir.property</code>, <code>res.company</code>, <code>res.request</code>, <code>res.currency</code>, <code>res.users</code>, <code>res.partner</code>, and so on.</li>
<li>crm: Customer &amp; Supplier Relationship management.</li>
<li>sale: Sales management.</li>
<li>mrp: Manufacturing Resource Planning.</li>
</ul>
<p>By using Python, XML files, and relying on OpenERP's ORM and its extensibility mechanisms, new modules can be written easily and quickly. OpenERP's open source nature and its numerous modules also provide a lot of examples for any new development.</p>
<h2 id="module-structure">Module Structure</h2>
<h3 id="the-modules">The Modules</h3>
<ol>
<li>Introduction</li>
<li>
<p>Files &amp; Directories:</p>
<ol>
<li>__openerp__.py</li>
<li>__init__.py</li>
<li>XML Files:<ol>
<li>Actions</li>
<li>Menu Entries</li>
<li>Reports</li>
<li>Wizards</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Profiles</p>
</li>
</ol>
<h3 id="modules-files-and-directories">Modules - Files and Directories</h3>
<p>All the modules are located in the server/addons directory.</p>
<p>The following steps are necessary to create a new module:</p>
<ul>
<li>create a subdirectory in the server/addons directory</li>
<li>create a module description file: <strong>__openerp__.py</strong></li>
<li>create the <strong>Python</strong> file containing the <strong>objects</strong></li>
<li>create <strong>.xml files</strong> that download the data (views, menu entries, demo data, ...)</li>
<li>optionally create <strong>reports</strong>, <strong>wizards</strong> or <strong>workflows</strong>.</li>
</ul>
<h4 id="the-modules-files-and-directories-xml-files">The Modules - Files And Directories - XML Files</h4>
<p>XML files located in the module directory are used to modify the structure of the database. They are used for many purposes, among which we can cite :</p>
<ul>
<li>initialization and demonstration data declaration,</li>
<li>views declaration,</li>
<li>reports declaration,</li>
<li>wizards declaration,</li>
<li>workflows declaration.</li>
</ul>
<p>General structure of OpenERP XML files is more detailed in the xml-serialization section. Look here if you are interested in learning more about <em>initialization</em> and <em>demonstration data declaration</em> XML files. The following section are only related to XML specific to <em>actions, menu entries, reports, wizards</em> and <em>workflows</em> declaration.</p>
<h4 id="python-module-descriptor-file-9595init9595py">Python Module Descriptor File __init__.py</h4>
<p><strong>The __init__.py file</strong></p>
<p>The __init__.py file is, like any Python module, executed at the start of the program. It needs to import the Python files that need to be loaded.</p>
<p>So, if you create a "module.py" file, containing the description of your objects, you have to write one line in __init__.py:</p>
<pre><code>import module
</code></pre>
<h4 id="openerp-module-descriptor-file-9595openerp9595py">OpenERP Module Descriptor File __openerp__.py</h4>
<p>In the created module directory, you must add a <strong>__openerp__.py</strong> file. This file, which must be in Python format, is responsible to</p>
<ol>
<li>determine the <em>XML files that will be parsed</em> during the initialization of the server, and also to</li>
<li>determine the <em>dependencies</em> of the created module.</li>
</ol>
<p>This file must contain a Python dictionary with the following values:</p>
<p><strong>name</strong></p>
<blockquote>
<p>The (Plain English) name of the module.</p>
</blockquote>
<p><strong>version</strong></p>
<blockquote>
<p>The version of the module, on 2 digits (1.2 or 2.0).</p>
</blockquote>
<p><strong>description</strong></p>
<blockquote>
<p>The module description (text) including documentation on how to use your modules.</p>
</blockquote>
<p><strong>author</strong></p>
<blockquote>
<p>The author of the module.</p>
</blockquote>
<p><strong>website</strong></p>
<blockquote>
<p>The website of the module.</p>
</blockquote>
<p><strong>license</strong></p>
<blockquote>
<p>The license of the module (default:GPL-2).</p>
</blockquote>
<p><strong>depends</strong></p>
<blockquote>
<p>List of modules on which this module depends. The base module must almost always be in the dependencies because some necessary data for the views, reports, ... are in the base module.</p>
</blockquote>
<p><strong>init</strong></p>
<blockquote>
<p>List of .xml files to load when the server is launched with the "--init=module" argument. Filepaths must be relative to the directory where the module is. OpenERP XML File Format is detailed in this section.</p>
</blockquote>
<p><strong>data</strong></p>
<blockquote>
<p>List of .xml files to load when the server is launched with the "--update=module" launched. Filepaths must be relative to the directory where the module is. OpenERP XML File Format is detailed in this section.</p>
</blockquote>
<p><strong>demo</strong></p>
<blockquote>
<p>List of .xml files to provide demo data. Filepaths must be relative to the directory where the module is. OpenERP XML File Format is detailed in this section.</p>
</blockquote>
<p><strong>installable</strong></p>
<blockquote>
<p>True or False. Determines if the module is installable or not.</p>
</blockquote>
<p><strong>images</strong></p>
<blockquote>
<p>List of .png files to provide screenshots, used on <a href="http://apps.openerp.com">http://apps.openerp.com</a>.</p>
</blockquote>
<p><strong>active</strong></p>
<blockquote>
<p>True or False (default: False). Determines the modules that are installed on the database creation.</p>
</blockquote>
<p><strong>test</strong></p>
<blockquote>
<p>List of .yml files to provide YAML tests.</p>
</blockquote>
<p><strong>Example</strong></p>
<p>Here is an example of __openerp__.py file for the product module</p>
<pre><code class="python">{
    &quot;name&quot; : &quot;Products &amp; Pricelists&quot;,
    &quot;version&quot; : &quot;1.1&quot;,
    &quot;author&quot; : &quot;Open&quot;,
    &quot;category&quot; : &quot;Generic Modules/Inventory Control&quot;,
    &quot;depends&quot; : [&quot;base&quot;, &quot;account&quot;],
    &quot;init_xml&quot; : [],
    &quot;demo_xml&quot; : [&quot;product_demo.xml&quot;],
    &quot;update_xml&quot; : [&quot;product_data.xml&quot;, &quot;product_report.xml&quot;, &quot;product_wizard.xml&quot;,
                    &quot;product_view.xml&quot;, &quot;pricelist_view.xml&quot;],
    &quot;installable&quot;: True,
    &quot;active&quot;: True
}
</code></pre>

<p>The files that must be placed in init_xml are the ones that relate to the workflow definition, data to load at the installation of the software and the data for the demonstrations.</p>
<p>The files in <strong>update_xml</strong> concern: views, reports and wizards.</p>
<h4 id="objects">Objects</h4>
<p>All OpenERP resources are objects: menus, actions, reports, invoices, partners, ... OpenERP is based on an object relational mapping of a database to control the information. Object names are hierarchical, as in the following examples:</p>
<ul>
<li>account.transfer : a money transfer</li>
<li>account.invoice : an invoice</li>
<li>account.invoice.line : an invoice line</li>
</ul>
<p>Generally, the first word is the name of the module: account, stock, sale.</p>
<p>Other advantages of an ORM;</p>
<ul>
<li>simpler relations : invoice.partner.address[0].city</li>
<li>objects have properties and methods: invoice.pay(3400 EUR),</li>
<li>inheritance, high level constraints, ...</li>
</ul>
<p>It is easier to manipulate one object (example, a partner) than several tables (partner address, categories, events, ...)</p>
<p><img alt="*The Physical Objects Model of [OpenERP version 3.0.3]*" src="../images/pom_3_0_3.png" /></p>
<h5 id="postgresql">PostgreSQL</h5>
<p>The ORM of OpenERP is constructed over PostgreSQL. It is thus possible to query the object used by OpenERP using the object interface or by directly using SQL statements.</p>
<p>But it is dangerous to write or read directly in the PostgreSQL database, as you will shortcut important steps like constraints checking or workflow modification.</p>
<div class="admonition note">

The Physical Database Model of OpenERP

</div>

<h4 id="pre-installed-data">Pre-Installed Data</h4>
<p>Data can be inserted or updated into the PostgreSQL tables corresponding to the OpenERP objects using XML files. The general structure of an OpenERP XML file is as follows:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;openerp&gt;
  &lt;data&gt;
    &lt;record model=&quot;model.name_1&quot; id=&quot;id_name_1&quot;&gt;
      &lt;field name=&quot;field1&quot;&gt;
        &quot;field1 content&quot;
      &lt;/field&gt;
      &lt;field name=&quot;field2&quot;&gt;
        &quot;field2 content&quot;
      &lt;/field&gt;
      (...)
    &lt;/record&gt;
    &lt;record model=&quot;model.name_2&quot; id=&quot;id_name_2&quot;&gt;
        (...)
    &lt;/record&gt;
    (...)
  &lt;/data&gt;
&lt;/openerp&gt;
</code></pre>

<p>Fields content are strings that must be encoded as <em>UTF-8</em> in XML files.</p>
<p>Let's review an example taken from the OpenERP source (base_demo.xml in the base module):</p>
<pre><code class="xml">&lt;record model=&quot;res.company&quot; id=&quot;main_company&quot;&gt;
    &lt;field name=&quot;name&quot;&gt;Tiny sprl&lt;/field&gt;
    &lt;field name=&quot;partner_id&quot; ref=&quot;main_partner&quot;/&gt;
    &lt;field name=&quot;currency_id&quot; ref=&quot;EUR&quot;/&gt;
&lt;/record&gt;
</code></pre>

<pre><code class="xml">&lt;record model=&quot;res.users&quot; id=&quot;user_admin&quot;&gt;
    &lt;field name=&quot;login&quot;&gt;admin&lt;/field&gt;
    &lt;field name=&quot;password&quot;&gt;admin&lt;/field&gt;
    &lt;field name=&quot;name&quot;&gt;Administrator&lt;/field&gt;
    &lt;field name=&quot;signature&quot;&gt;Administrator&lt;/field&gt;
    &lt;field name=&quot;action_id&quot; ref=&quot;action_menu_admin&quot;/&gt;
    &lt;field name=&quot;menu_id&quot; ref=&quot;action_menu_admin&quot;/&gt;
    &lt;field name=&quot;address_id&quot; ref=&quot;main_address&quot;/&gt;
    &lt;field name=&quot;groups_id&quot; eval=&quot;[(6,0,[group_admin])]&quot;/&gt;
    &lt;field name=&quot;company_id&quot; ref=&quot;main_company&quot;/&gt;
&lt;/record&gt;
</code></pre>

<p>This last record defines the admin user :</p>
<ul>
<li>The fields login, password, etc are straightforward.</li>
<li>The ref attribute allows to fill relations between the records :</li>
</ul>
<pre><code class="xml">&lt;field name=&quot;company_id&quot; ref=&quot;main_company&quot;/&gt;
</code></pre>

<p>The field <strong>company_id</strong> is a many-to-one relation from the user object to the company object, and <strong>main_company</strong> is the id of to associate.</p>
<ul>
<li>The <strong>eval</strong> attribute allows to put some python code in the xml: here the groups_id field is a many2many. For such a field, "[(6,0,[group_admin])]" means : Remove all the groups associated with the current user and use the list [group_admin] as the new associated groups (and group_admin is the id of another record).</li>
<li>The <strong>search</strong> attribute allows to find the record to associate when you do not know its xml id. You can thus specify a search criteria to find the wanted record. The criteria is a list of tuples of the same form than for the predefined search method. If there are several results, an arbitrary one will be chosen (the first one):</li>
</ul>
<pre><code class="xml">&lt;field name=&quot;partner_id&quot; search=&quot;[]&quot; model=&quot;res.partner&quot;/&gt;
</code></pre>

<p>This is a classical example of the use of <strong>search</strong> in demo data: here we do not really care about which partner we want to use for the test, so we give an empty list. Notice the <strong>model</strong> attribute is currently mandatory.</p>
<h5 id="record-tag">Record Tag</h5>
<p><strong>Description</strong></p>
<p>The addition of new data is made with the record tag. This one takes a mandatory attribute : model. Model is the object name where the insertion has to be done. The tag record can also take an optional attribute: id. If this attribute is given, a variable of this name can be used later on, in the same file, to make reference to the newly created resource ID.</p>
<p>A record tag may contain field tags. They indicate the record's fields value. If a field is not specified the default value will be used.</p>
<p><strong>Example</strong></p>
<pre><code class="xml">&lt;record model=&quot;ir.actions.report.xml&quot; id=&quot;l0&quot;&gt;
     &lt;field name=&quot;model&quot;&gt;account.invoice&lt;/field&gt;
     &lt;field name=&quot;name&quot;&gt;Invoices List&lt;/field&gt;
     &lt;field name=&quot;report_name&quot;&gt;account.invoice.list&lt;/field&gt;
     &lt;field name=&quot;report_xsl&quot;&gt;account/report/invoice.xsl&lt;/field&gt;
     &lt;field name=&quot;report_xml&quot;&gt;account/report/invoice.xml&lt;/field&gt;
&lt;/record&gt;
</code></pre>

<h5 id="field-tag">Field tag</h5>
<p>The attributes for the field tag are the following:</p>
<p>name : mandatory  :   the field name</p>
<p>eval : optional  :   python expression that indicating the value to add</p>
<p>ref  :   reference to an id defined in this file</p>
<p>model  :   model to be looked up in the search</p>
<p>search  :   a query</p>
<h5 id="function-tag">Function tag</h5>
<p>A function tag can contain other function tags.</p>
<p>model : mandatory  :   The model to be used</p>
<p>name : mandatory  :   the function given name</p>
<p>eval  :   should evaluate to the list of parameters of the method to be called, excluding cr and uid</p>
<p><strong>Example</strong></p>
<pre><code class="xml">&lt;function model=&quot;ir.ui.menu&quot; name=&quot;search&quot; eval=&quot;[[('name','=','Operations')]]&quot;/&gt;
</code></pre>

<h5 id="getitem-tag">Getitem tag</h5>
<p>Takes a subset of the evaluation of the last child node of the tag.</p>
<p>type : mandatory  :   int or list</p>
<p>index : mandatory  :   int or string (a key of a dictionary)</p>
<p><strong>Example</strong></p>
<p>Evaluates to the first element of the list of ids returned by the function node</p>
<pre><code class="xml">&lt;getitem index=&quot;0&quot; type=&quot;list&quot;&gt;
    &lt;function model=&quot;ir.ui.menu&quot; name=&quot;search&quot; eval=&quot;[[('name','=','Operations')]]&quot;/&gt;
&lt;/getitem&gt;
</code></pre>

<h4 id="i18n">i18n</h4>
<h5 id="improving-translations">Improving Translations</h5>
<p>Translations are managed by the <a href="https://translations.launchpad.net/openobject">Launchpad Web interface</a>. Here, you'll find the list of translatable projects.</p>
<p>Please read the <a href="https://answers.launchpad.net/rosetta/+faqs">FAQ</a> before asking questions.</p>
<p>Contrary to the 4.2.x version, the translations are now done by module. So, instead of an unique <code>i18n</code> folder for the whole application, each module has its own <code>i18n</code> folder. In addition, OpenERP can now deal with <code>.po</code><a href="http://www.gnu.org/software/autoconf/manual/gettext/PO-Files.html#PO-Files">^1</a> files as import/export format. The translation files of the installed languages are automatically loaded when installing or updating a module. OpenERP can also generate a .tgz archive containing well organised <code>.po</code> files for each selected module.</p>
<h4 id="process">Process</h4>
<h5 id="defining-the-process">Defining the process</h5>
<p>Through the interface and module recorder. Then, put the generated XML in your own module.</p>
<h4 id="views">Views</h4>
<h5 id="technical-specifications-architecture-views">Technical Specifications - Architecture - Views</h5>
<p>Views are a way to represent the objects on the client side. They indicate to the client how to lay out the data coming from the objects on the screen.</p>
<p>There are two types of views:</p>
<ul>
<li>form views</li>
<li>tree views</li>
</ul>
<p>Lists are simply a particular case of tree views.</p>
<p>A same object may have several views: the first defined view of a kind (<em>tree, form</em>, ...) will be used as the default view for this kind. That way you can have a default tree view (that will act as the view of a one2many) and a specialized view with more or less information that will appear when one double-clicks on a menu item. For example, the products have several views according to the product variants.</p>
<p>Views are described in XML.</p>
<p>If no view has been defined for an object, the object is able to generate a view to represent itself. This can limit the developer's work but results in less ergonomic views.</p>
<h5 id="usage-example">Usage example</h5>
<p>When you open an invoice, here is the chain of operations followed by the client:</p>
<ul>
<li>An action asks to open the invoice (it gives the object's data (account.invoice), the view, the domain (e.g. only unpaid invoices) ).</li>
<li>The client asks (with XML-RPC) to the server what views are defined for the invoice object and what are the data it must show.</li>
<li>The client displays the form according to the view</li>
</ul>
<p><img alt="" src="../images/arch_view_use.png" /></p>
<h5 id="to-develop-new-objects">To develop new objects</h5>
<p>The design of new objects is restricted to the minimum: create the objects and optionally create the views to represent them. The PostgreSQL tables do not have to be written by hand because the objects are able to automatically create them (or adapt them in case they already exist).</p>
<h4 id="reports">Reports</h4>
<p>OpenERP uses a flexible and powerful reporting system. Reports are generated either in PDF or in HTML. Reports are designed on the principle of separation between the data layer and the presentation layer.</p>
<p>Reports are described more in details in the <a href="http://openobject.com/wiki/index.php/Developers:Developper%27s_Book/Reports">Reporting</a> chapter.</p>
<h4 id="wizards">Wizards</h4>
<p>Here's an example of a .XML file that declares a wizard.</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;openerp&gt;
    &lt;data&gt;
     &lt;wizard string=&quot;Employee Info&quot;
             model=&quot;hr.employee&quot;
             name=&quot;employee.info.wizard&quot;
             id=&quot;wizard_employee_info&quot;/&gt;
    &lt;/data&gt;
&lt;/openerp&gt;
</code></pre>

<p>A wizard is declared using a wizard tag. See "Add A New Wizard" for more information about wizard XML.</p>
<p>also you can add wizard in menu using following xml entry</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;/openerp&gt;
     &lt;data&gt;
     &lt;wizard string=&quot;Employee Info&quot;
             model=&quot;hr.employee&quot;
             name=&quot;employee.info.wizard&quot;
             id=&quot;wizard_employee_info&quot;/&gt;
     &lt;menuitem
             name=&quot;Human Resource/Employee Info&quot;
             action=&quot;wizard_employee_info&quot;
             type=&quot;wizard&quot;
             id=&quot;menu_wizard_employee_info&quot;/&gt;
     &lt;/data&gt;
&lt;/openerp&gt;
</code></pre>

<h4 id="workflow">Workflow</h4>
<p>The objects and the views allow you to define new forms very simply, lists/trees and interactions between them. But that is not enough, you must define the dynamics of these objects.</p>
<p>A few examples:</p>
<ul>
<li>a confirmed sale order must generate an invoice, according to certain conditions</li>
<li>a paid invoice must, only under certain conditions, start the shipping order</li>
</ul>
<p>The workflows describe these interactions with graphs. One or several workflows may be associated to the objects. Workflows are not mandatory; some objects don't have workflows.</p>
<p>Below is an example workflow used for sale orders. It must generate invoices and shipments according to certain conditions.</p>
<p><img alt="" src="../images/arch_workflow_sale.png" /></p>
<p>In this graph, the nodes represent the actions to be done:</p>
<ul>
<li>create an invoice,</li>
<li>cancel the sale order,</li>
<li>generate the shipping order, ...</li>
</ul>
<p>The arrows are the conditions;</p>
<ul>
<li>waiting for the order validation,</li>
<li>invoice paid,</li>
<li>click on the cancel button, ...</li>
</ul>
<p>The squared nodes represent other Workflows;</p>
<ul>
<li>the invoice</li>
<li>the shipping</li>
</ul>
<h2 id="openerp-module-descriptor-file-9595openerp9595py_1">OpenERP Module Descriptor File : __openerp__.py</h2>
<h3 id="normal-module">Normal Module</h3>
<p>In the created module directory, you must add a <strong>__openerp__.py</strong> file. This file, which must be in Python format, is responsible to</p>
<ol>
<li>determine the XML files that will be parsed during the initialization of the server, and also to</li>
<li>determine the dependencies of the created module.</li>
</ol>
<p>This file must contain a Python dictionary with the following values:</p>
<p><strong>name</strong></p>
<blockquote>
<p>The (Plain English) name of the module.</p>
</blockquote>
<p><strong>version</strong></p>
<blockquote>
<p>The version of the module.</p>
</blockquote>
<p><strong>description</strong></p>
<blockquote>
<p>The module description (text).</p>
</blockquote>
<p><strong>author</strong></p>
<blockquote>
<p>The author of the module.</p>
</blockquote>
<p><strong>website</strong></p>
<blockquote>
<p>The website of the module.</p>
</blockquote>
<p><strong>license</strong></p>
<blockquote>
<p>The license of the module (default:GPL-2).</p>
</blockquote>
<p><strong>depends</strong></p>
<blockquote>
<p>List of modules on which this module depends. The base module must almost always be in the dependencies because some necessary data for the views, reports, ... are in the base module.</p>
</blockquote>
<p><strong>init_xml</strong></p>
<blockquote>
<p>List of .xml files to load when the server is launched with the "--init=module" argument. Filepaths must be relative to the directory where the module is. OpenERP XML File Format is detailed in this section.</p>
</blockquote>
<p><strong>update_xml</strong></p>
<blockquote>
<p>List of .xml files to load when the server is launched with the "--update=module" launched. Filepaths must be relative to the directory where the module is. OpenERP XML File Format is detailed in this section.</p>
</blockquote>
<p><strong>installable</strong></p>
<blockquote>
<p>True or False. Determines if the module is installable or not.</p>
</blockquote>
<p><strong>active</strong></p>
<blockquote>
<p>True or False (default: False). Determines the modules that are installed on the database creation.</p>
</blockquote>
<h4 id="example">Example</h4>
<p>Here is an example of __openerp__.py file for the <em>product</em> module:</p>
<pre><code class="python">{
    &quot;name&quot; : &quot;Products &amp; Pricelists&quot;,
    &quot;version&quot; : &quot;1.1&quot;,
    &quot;author&quot; : &quot;Open&quot;,
    &quot;category&quot; : &quot;Generic Modules/Inventory Control&quot;,
    &quot;depends&quot; : [&quot;base&quot;, &quot;account&quot;],
    &quot;init_xml&quot; : [],
    &quot;demo_xml&quot; : [&quot;product_demo.xml&quot;],
    &quot;update_xml&quot; : [&quot;product_data.xml&quot;,&quot;product_report.xml&quot;, &quot;product_wizard.xml&quot;,&quot;product_view.xml&quot;, &quot;pricelist_view.xml&quot;],
    &quot;installable&quot;: True,
    &quot;active&quot;: True
}
</code></pre>

<p>The files that must be placed in init_xml are the ones that relate to the workflow definition, data to load at the installation of the software and the data for the demonstrations.</p>
<p>The files in <strong>update_xml</strong> concern: views, reports and wizards.</p>
<h3 id="profile-module">Profile Module</h3>
<p>The purpose of a profile is to initialize OpenERP with a set of modules directly after the database has been created. A profile is a special kind of module that contains no code, only <em>dependencies on other modules</em>.</p>
<p>In order to create a profile, you only have to create a new directory in server/addons (you <em>should</em> call this folder profile_modulename), in which you put an <em>empty</em> __init__.py file (as every directory Python imports must contain an __init__.py file), and a __openerp__.py whose structure is as follows :</p>
<pre><code class="python">{
     &quot;name&quot;:&quot;''Name of the Profile'',
     &quot;version&quot;:&quot;''Version String''&quot;,
     &quot;author&quot;:&quot;''Author Name''&quot;,
     &quot;category&quot;:&quot;Profile&quot;,
     &quot;depends&quot;:[''List of the modules to install with the profile''],
     &quot;demo_xml&quot;:[],
     &quot;update_xml&quot;:[],
     &quot;active&quot;:False,
     &quot;installable&quot;:True,
}
</code></pre>

<h4 id="example_1">Example</h4>
<p>Here's the code of the file server/bin/addons/profile_manufacturing/__openerp__.py, which corresponds to the manufacturing industry profile in OpenERP.</p>
<pre><code class="python">{
     &quot;name&quot;:&quot;Manufacturing industry profile&quot;,
     &quot;version&quot;:&quot;1.1&quot;,
     &quot;author&quot;:&quot;Open&quot;,
     &quot;category&quot;:&quot;Profile&quot;,
     &quot;depends&quot;:[&quot;mrp&quot;, &quot;crm&quot;, &quot;sale&quot;, &quot;delivery&quot;],
     &quot;demo_xml&quot;:[],
     &quot;update_xml&quot;:[],
     &quot;active&quot;:False,
     &quot;installable&quot;:True,
}
</code></pre>

<h2 id="module-creation">Module creation</h2>
<h3 id="getting-the-skeleton-directory">Getting the skeleton directory</h3>
<p>You can copy __openerp__.py and __init__.py from any other module to create a new module into a new directory.</p>
<p>As an example on Ubuntu: :</p>
<pre><code>    $ cd ~/workspace/stable/stable_addons_5.0/
    $ mkdir travel
    $ sudo cp ~/workspace/stable/stable_addons_5.0/hr/__openerp__.py ~/workspace/stable/stable_addons_5.0/travel
    $ sudo cp ~/workspace/stable/stable_addons_5.0/hr/__init__.py ~/workspace/stable/stable_addons_5.0/travel
</code></pre>

<p>You will need to give yourself permissions over that new directory if you want to be able to modify it: :</p>
<pre><code>    $ sudo chown -R `whoami` travel
</code></pre>

<p>You got yourself the directory for a new module there, and a skeleton structure, but you still need to change a few things inside the module's definition...</p>
<h3 id="changing-the-default-definition">Changing the default definition</h3>
<p>To change the default settings of the "travel" module, get yourself into the "travel" directory and edit <em>__openerp__.py</em> (with <em>gedit</em>, for example, a simple text editor. Feel free to use another one) :</p>
<pre><code>    $ cd travel
    $ gedit __openerp__.py
</code></pre>

<p>The file looks like this:</p>
<pre><code class="python">{
  &quot;name&quot; : &quot;Human Resources&quot;,
  &quot;version&quot; : &quot;1.1&quot;,
  &quot;author&quot; : &quot;Tiny&quot;,
  &quot;category&quot; : &quot;Generic Modules/Human Resources&quot;,
  &quot;website&quot; : &quot;http://www.openerp.com&quot;,
  &quot;description&quot;: &quot;&quot;&quot;
  Module for human resource management. You can manage:
  * Employees and hierarchies
  * Work hours sheets
  * Attendances and sign in/out system

  Different reports are also provided, mainly for attendance statistics.
  &quot;&quot;&quot;,
  'author': 'Tiny',
  'website': 'http://www.openerp.com',
  'depends': ['base', 'process'],
  'init_xml': [],
  'update_xml': [
      'security/hr_security.xml',
      'security/ir.model.access.csv',
      'hr_view.xml',
      'hr_department_view.xml',
      'process/hr_process.xml'
  ],
  'demo_xml': ['hr_demo.xml', 'hr_department_demo.xml'],
  'installable': True,
  'active': False,
  'certificate': '0086710558965',
}
</code></pre>

<p>You will want to change whichever settings you feel right and get something like this:</p>
<pre><code class="python">{
    &quot;name&quot; : &quot;Travel agency module&quot;,
    &quot;version&quot; : &quot;1.1&quot;,
    &quot;author&quot; : &quot;Tiny&quot;,
    &quot;category&quot; : &quot;Generic Modules/Others&quot;,
    &quot;website&quot; : &quot;http://www.openerp.com&quot;,
    &quot;description&quot;: &quot;A module to manage hotel bookings and a few other useful features.&quot;,
    &quot;depends&quot; : [&quot;base&quot;],
    &quot;init_xml&quot; : [],
    &quot;update_xml&quot; : [&quot;travel_view.xml&quot;],
    &quot;active&quot;: True,
    &quot;installable&quot;: True
}
</code></pre>

<p>Note the "active" field becomes true.</p>
<h3 id="changing-the-main-module-file">Changing the main module file</h3>
<p>Now you need to update the travel.py script to suit the needs of your module. We suggest you follow the Flash tutorial for this or download the travel agency module from the 20 minutes tutorial page. :</p>
<pre><code>The documentation below is overlapping the two next step in this wiki tutorial,
so just consider them as a help and head towards the next two pages first...
</code></pre>
<p>The travel.py file should initially look like this:</p>
<pre><code class="python">from osv import osv, fields

class travel_hostel(osv.osv):
       _name = 'travel.hostel'
       _inherit = 'res.partner'
       _columns = {
       'rooms_id': fields.one2many('travel.room', 'hostel_id', 'Rooms'),
       'quality': fields.char('Quality', size=16),
       }
       _defaults = {
       }
travel_hostel()
</code></pre>

<p>Ideally, you would copy that bunch of code several times to create all the entities you need (travel_airport, travel_room, travel_flight). This is what will hold the database structure of your objects, but you don't really need to worry too much about the database side. Just filling this file will create the system structure for you when you install the module.</p>
<h3 id="customizing-the-view">Customizing the view</h3>
<p>You can now move on to editing the views. To do this, edit the custom_view.xml file. It should first look like this:</p>
<pre><code class="xml">&lt;openerp&gt;
&lt;data&gt;
    &lt;record model=&quot;res.groups&quot; id=&quot;group_compta_user&quot;&gt;
            &lt;field name=&quot;name&quot;&gt;grcompta&lt;/field&gt;
    &lt;/record&gt;
    &lt;record model=&quot;res.groups&quot; id=&quot;group_compta_admin&quot;&gt;
            &lt;field name=&quot;name&quot;&gt;grcomptaadmin&lt;/field&gt;
    &lt;/record&gt;
    &lt;menuitem name=&quot;Administration&quot; groups=&quot;admin,grcomptaadmin&quot;
            icon=&quot;terp-stock&quot; id=&quot;menu_admin_compta&quot;/&gt;
&lt;/data&gt;
&lt;/openerp&gt;
</code></pre>

<p>This is, as you can see, an example taken from an accounting system (French people call accounting "comptabilité", which explains the compta bit).</p>
<p>Defining a view is defining the interfaces the user will get when accessing your module. Just defining a bunch of fields here should already get you started on a complete interface. However, due to the complexity of doing it right, we recommend, once again, that download the travel agency module example from this link <a href="http://www.openerp.com/download/modules/5.0/">http://www.openerp.com/download/modules/5.0/</a>.</p>
<p>Next you should be able to create different views using other files to separate them from your basic/admin view.</p>
<h2 id="action-creation">Action creation</h2>
<h3 id="linking-events-to-action">Linking events to action</h3>
<p>The available type of events are:</p>
<ul>
<li><strong>client_print_multi</strong> (print from a list or form)</li>
<li><strong>client_action_multi</strong> (action from a list or form)</li>
<li><strong>tree_but_open</strong> (double click on the item of a tree, like the menu)</li>
<li><strong>tree_but_action</strong> (action on the items of a tree)</li>
</ul>
<p>To map an events to an action:</p>
<pre><code class="xml">&lt;record model=&quot;ir.values&quot; id=&quot;ir_open_journal_period&quot;&gt;
    &lt;field name=&quot;key2&quot;&gt;tree_but_open&lt;/field&gt;
    &lt;field name=&quot;model&quot;&gt;account.journal.period&lt;/field&gt;
    &lt;field name=&quot;name&quot;&gt;Open Journal&lt;/field&gt;
    &lt;field name=&quot;value&quot; eval=&quot;'ir.actions.wizard,%d'%action_move_journal_line_form_select&quot;/&gt;
    &lt;field name=&quot;object&quot; eval=&quot;True&quot;/&gt;
&lt;/record&gt;
</code></pre>

<p>If you double click on a journal/period (object: account.journal.period), this will open the selected wizard. (<code>id="action_move_journal_line_form_select"</code>).</p>
<p>You can use a res_id field to allow this action only if the user click on a specific object.</p>
<pre><code class="xml">&lt;record model=&quot;ir.values&quot; id=&quot;ir_open_journal_period&quot;&gt;
    &lt;field name=&quot;key2&quot;&gt;tree_but_open&lt;/field&gt;
    &lt;field name=&quot;model&quot;&gt;account.journal.period&lt;/field&gt;
    &lt;field name=&quot;name&quot;&gt;Open Journal&lt;/field&gt;
    &lt;field name=&quot;value&quot; eval=&quot;'ir.actions.wizard,%d'%action_move_journal_line_form_select&quot;/&gt;
    &lt;field name=&quot;res_id&quot; eval=&quot;3&quot;/&gt;
    &lt;field name=&quot;object&quot; eval=&quot;True&quot;/&gt;
&lt;/record&gt;
</code></pre>

<p>The action will be triggered if the user clicks on the account.journal.period n°3.</p>
<p>When you declare wizard, report or menus, the ir.values creation is automatically made with these tags:</p>
<ul>
<li>&lt;wizard... /&gt;</li>
<li>&lt;menuitem... /&gt;</li>
<li>&lt;report... /&gt;</li>
</ul>
<p>So you usually do not need to add the mapping by yourself.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
